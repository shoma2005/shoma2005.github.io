# MPV Player

MPV Playerは、動画学習や繰り返し視聴に特化した軽量動画プレーヤーです。ABループ機能、プレイリスト管理、サムネイル表示など、効率的な動画視聴をサポートする便利な機能を搭載しています。

## 特徴

- 🎬 **高性能な動画再生**: 幅広いフォーマットに対応した安定した動画再生
- 🔄 **ABループ機能**: 特定区間の繰り返し再生で語学学習や楽器練習に最適
- 📋 **プレイリスト管理**: 複数の動画を管理・保存して連続再生
- 🖼️ **サムネイル表示**: 視覚的に分かりやすいプレイリスト表示
- ⚡ **再生速度調整**: 0.25倍速～2.0倍速まで自由に調整
- 🎚️ **音量調整**: 最大150%まで増幅可能
- 🔁 **画面回転**: 縦動画も快適に視聴
- 📺 **全画面表示**: F11キーで没入感のある視聴体験
- 🌐 **多言語対応**: 日本語・英語のインターフェース
- 💾 **設定の自動保存**: 個別動画の設定を記憶
- 🔔 **自動更新チェック**: 最新バージョンを自動で通知
- 🎯 **ファイル関連付け**: MP4などの動画ファイルを直接開ける

## 無料版と有料版

MPV Playerには無料版と有料版があります。

### 無料版の制限

| 機能 | 無料版 | 有料版 |
|------|--------|--------|
| プレイリストに追加できる動画数 | 5つまで | 無制限 |
| 保存できるプレイリスト数 | 1つまで | 無制限 |
| 再生速度の最低値 | 0.75倍まで | 0.25倍まで |
| 動画ごとの設定保存 | × | ○ |

### 動画ごとの設定保存（有料版のみ）

有料版では、動画ごとに以下の設定が自動保存されます：
- 音量
- 再生速度
- ABループ位置
- 画面回転角度

動画を再度開いた時に、前回の設定が自動的に復元されます。

## 動作環境

- Windows 10/11

## インストール

1. インストーラー（MPVPlayer_Setup.exe）をダウンロード
2. インストーラーを実行（管理者権限は不要）
3. インストール時に「動画ファイルをMPV Playerに関連付ける」をチェックすると、動画ファイルをダブルクリックで開けるようになります

## 使い方

### 基本操作

#### 動画を開く方法

以下のいずれかの方法で動画を開けます：
- **開くボタン**をクリックしてファイルを選択
- メインウィンドウに動画ファイルをドラッグ&ドロップ
- エクスプローラーで動画ファイルをダブルクリック（ファイル関連付け設定時）
- 動画ファイルを右クリック → **プログラムから開く** → **MPV Player**

**対応形式**: MP4, MKV, AVI, MOV, WMV, FLV

#### 再生コントロール

- **Space**: 再生/一時停止
- **左キー/右キー**: 5秒巻き戻し/早送り
- **上キー/下キー**: 音量調整（0～150%）
- **音量ラベルをクリック**: 音量スライダーを表示
- **S/F**: 再生速度ダウン/アップ
- **N/P**: 次の動画/前の動画
- **F11**: 全画面表示の切り替え
- **R**: 画面を90度回転
- **L**: ループモード切り替え
- **A/B/C**: ABループのA地点設定/B地点設定/クリア

**ヒント**: すべてのボタンにマウスを重ねると、対応するショートカットキーがツールチップで表示されます。

### ABループ機能

特定の区間を繰り返し再生する機能です。語学学習、楽器練習、ダンス練習などに便利です。

#### 使い方
1. **A地点を設定**: 繰り返したい区間の開始位置で**Aボタン**をクリック（または**Aキー**を押す）
2. **B地点を設定**: 繰り返したい区間の終了位置で**Bボタン**をクリック（または**Bキー**を押す）
3. A地点～B地点が自動的にループ再生されます
4. **マーカーをドラッグ**: シークバー上のマーカーで微調整可能
5. **クリアボタン**: ABループ解除（または**Cキー**を押す）

#### ループモードとの連携
- **ループ: オフ**: B地点で停止
- **ループ: オン**: A地点に戻って繰り返し再生
- **ループ: すべて**: B地点で次の動画に移動

### プレイリスト機能

#### 基本操作
1. **プレイリストボタン**をクリックしてプレイリストウィンドウを開く
2. 動画を追加（以下のいずれか）:
   - **ファイル追加**ボタンをクリック
   - プレイリストウィンドウに動画をドラッグ&ドロップ
3. 動画をダブルクリックで再生
4. ドラッグ&ドロップで再生順序を変更
5. **クリア**で選択した動画を削除、**全てクリア**でリスト全体をクリア

#### サムネイル表示
**表示** → **サムネイル表示**を選択すると、各動画のサムネイルが表示されます。
- 再生中の動画は薄い青色で表示
- パス表示に戻すには **表示** → **パスのみ**

#### プレイリストの保存・読み込み
よく使う動画リストを保存しておけます。
1. **プレイリスト** → **プレイリスト保存**
2. プレイリスト名を入力して保存
3. **プレイリスト読込**で保存済みプレイリストを選択
4. **保存済みプレイリスト削除**で不要なプレイリストを削除

### ループモード

**ループボタン**または**Lキー**で3つのモードを切り替えます。

- **ループ: オフ**: 動画終了後に停止（次の動画がある場合は自動再生）
- **ループ: オン**: 現在の動画を繰り返し再生
- **ループ: すべて**: プレイリスト全体を繰り返し再生

ループモードを変更すると、画面左上に現在のモードがOSD表示されます。

### 再生速度の変更

以下の方法で再生速度を変更できます（0.25倍速～2.0倍速）：

- **メニューバー**: **再生速度**から選択
- **ショートカットキー**:
  - **Sキー**: 速度ダウン（0.25倍ずつ遅くなる）
  - **Fキー**: 速度アップ（0.25倍ずつ速くなる）

再生速度を変更すると、画面左上に現在の速度がOSD表示されます。

- 0.25倍、0.5倍: ゆっくり確認したい時
- 1.25倍、1.5倍: 効率的に視聴したい時
- 2.0倍: 素早く内容を確認したい時

**ヒント**: 再生速度は動画ごとに自動保存されます。

### 音量調整

- **上下キー**: 5%ずつ調整
- **音量ラベルをクリック**: スライダーで細かく調整
- **最大150%まで増幅可能**: 小さい音声も聞き取りやすく

音量を変更すると、画面左上に現在の音量がOSD表示されます。

**ヒント**: 音量設定は動画ごとに自動保存されます。

### 画面回転

**回転ボタン**または**Rキー**で90度ずつ回転します。

- スマートフォンで撮影した縦動画の再生に便利
- 回転設定は動画ごとに自動保存
- 回転すると画面左上に現在の角度がOSD表示されます

### 全画面表示

**F11キー**で全画面表示に切り替えます。

- タスクバーとウィンドウフレームが完全に隠れます
- 画面上部にマウスを移動すると解除ボタンが表示されます
- 再度**F11**キーで通常表示に戻ります

### 言語設定

メニューバーの**Language**から日本語・英語を選択できます。

- すべてのメニュー、ダイアログ、メッセージが切り替わります
- 設定は自動的に保存されます

### 更新チェック

**起動時の自動チェック**:
- アプリ起動の3秒後にバックグラウンドで最新バージョンを確認
- 新しいバージョンがある場合、通知ダイアログを表示
- **ダウンロード**ボタンでリリースページを開きます

**手動チェック**:
- **ヘルプ** → **更新チェック**でいつでも確認可能

### お問い合わせ

質問や不具合報告がある場合は、**ヘルプ** → **お問い合わせ**から送信できます。

- **メールクライアント選択**: OutlookまたはGmailを選択
- **お問い合わせ内容**: 質問や報告内容を入力
- **使用環境**: OSとバージョン情報が自動入力（編集可能）
- **送信**: 選択したメールクライアントが開き、入力内容が本文に反映されます

## キーボードショートカット一覧

| キー | 動作 |
|------|------|
| **Space** | 再生/一時停止 |
| **P** | 前の動画 |
| **N** | 次の動画 |
| **←** | 5秒巻き戻し |
| **→** | 5秒早送り |
| **↑** | 音量アップ（5%） |
| **↓** | 音量ダウン（5%） |
| **A** | ABループのA地点を設定 |
| **B** | ABループのB地点を設定 |
| **C** | ABループをクリア |
| **S** | 再生速度ダウン |
| **F** | 再生速度アップ |
| **R** | 画面を90度回転 |
| **L** | ループモード切替 |
| **F11** | 全画面表示の切り替え |

## 設定の自動保存

以下の設定は自動的に保存され、次回起動時に復元されます。

**動画ごとの設定**:
- 音量
- ABループの位置（A地点・B地点）
- 再生速度
- 画面回転角度

**アプリ全体の設定**:
- ウィンドウの位置とサイズ
- プレイリストウィンドウの位置とサイズ
- プレイリストウィンドウの表示状態（開いていたかどうか）
- ループモード
- 表示モード（パス表示/サムネイル表示）
- 言語設定

## ウィンドウ連動機能

メインウィンドウとプレイリストウィンドウは連動しています。

- どちらかのウィンドウをクリックすると、もう一方も自動的に前面に表示されます
- ショートカットキーはメインウィンドウで動作します

## トラブルシューティング

### 音が出ない
- **上下キー**で音量を調整してください
- 音量ラベルをクリックしてスライダーで確認してください
- Windowsのボリュームミキサーでアプリの音量を確認してください

### 動画が開けない
- 対応形式（MP4, MKV, AVI, MOV, WMV, FLV）を確認してください
- ファイルが破損していないか確認してください

### ABループがうまく動作しない
- A地点を設定してからB地点を設定してください
- シークバー上のマーカーをドラッグして微調整できます
- **クリアボタン**で一度リセットしてから再設定してください

### サムネイルが表示されない
- サムネイル生成には時間がかかる場合があります
- 動画ファイルが破損していないか確認してください

### 全画面表示が解除できない
- **F11キー**を押してください
- マウスを画面上部に移動して解除ボタンをクリックしてください

## ライセンス
本アプリケーションは以下のオープンソースソフトウェアを利用しています。

- PySide6 (LGPL)
- python-mpv (LGPL)
- mpv (LGPL)
- ffmpeg (LGPL)
- SQLite (Public Domain)

各ライセンス文書は「licenses」フォルダに同梱しています。

## 作者

S.Iwakiri

## バージョン履歴
### v1.0.2 Paid (2025.12.30)
- 音量復元機能について、ある動画についての設定ファイルが存在しない場合に機能しなくなる不具合が発生していたため修正。

### v1.0.1 Paid (2025.12.30)
- **ショートカットキーの追加**:
  - ABループ操作（A/B/Cキー）
  - 再生速度調整（S/Fキー）
- **ボタンツールチップ機能**: 全てのボタンにショートカットキーを表示
- **OSD表示機能**: 音量、速度、回転、ループモードの変更時に画面左上に状態表示
- **動画ごとの設定保存強化**: 音量と再生速度を動画ごとに自動保存・復元
- **プレイリスト機能強化**: 動画の長さをプレイリストに表示
- **全画面表示の改善**: 最大化状態を保持したまま全画面解除が可能に
- **お問い合わせ機能**: OutlookまたはGmailを選択して問い合わせ可能
- **オンラインヘルプ機能**: GitHubのREADMEへのリンクを追加
- **ウィンドウアクティブ制御の改善**: アプリ内ウィンドウ切り替え時の動作を最適化

### v1.0.0 Free (2025.01.17)
- **無料版初回リリース**
- 有料版の基本機能を無料で利用可能
- 無料版の制限:
  - プレイリストに追加できる動画数: 5つまで
  - 保存できるプレイリスト数: 1つまで
  - 再生速度の最低値: 0.75倍まで
  - 動画ごとの設定保存: 無効

### v1.0.0 Paid (2025.12.28)
- 初回リリース（有料版）
- 高性能な動画再生機能
- ABループ機能
- プレイリスト管理・保存機能
- サムネイル表示
- 音量調整（最大150%）
- 画面回転機能
- 全画面表示機能
- 再生速度調整（0.25倍～2.0倍）
- 多言語対応（日本語・英語）
- 設定の自動保存
- ウィンドウ連動機能
- 自動更新チェック機能
- ファイル関連付け機能
